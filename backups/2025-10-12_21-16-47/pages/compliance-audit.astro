---
import Base from '../layouts/Base.astro';
---
<Base title="Free Compliance Audit - Are You At Risk? | JCS">
<style>
.quiz-container{max-width:800px;margin:4rem auto;padding:1.5rem}
.quiz-header{text-align:center;margin-bottom:2rem}
.quiz-header h1{font-size:clamp(2rem,5vw,2.5rem);font-weight:900;color:#1e40af;margin-bottom:1rem}
.quiz-header p{font-size:1.1rem;color:#64748b;margin-bottom:1rem}
.time-badge{display:inline-block;background:linear-gradient(135deg,#10b981,#059669);color:white;padding:0.5rem 1.5rem;border-radius:50px;font-weight:700;font-size:0.9rem;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
.quiz-card{background:white;border-radius:20px;padding:2.5rem;box-shadow:0 20px 60px rgba(0,0,0,0.1);border:2px solid #e2e8f0}
.question-container{margin-bottom:2rem;display:none}
.question-container.active{display:block;animation:slideIn 0.3s ease}
@keyframes slideIn{from{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}
.question-number{font-size:0.85rem;font-weight:600;color:#3b82f6;margin-bottom:0.5rem}
.question-text{font-size:1.3rem;font-weight:700;color:#1e293b;margin-bottom:1.5rem;line-height:1.3}
.answer-options{display:grid;gap:1rem}
.answer-btn{padding:1.5rem;background:white;border:2px solid #e2e8f0;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s;text-align:left;color:#1e293b;display:flex;align-items:center;gap:1rem}
.answer-btn:hover{border-color:#3b82f6;background:#f0f9ff;transform:translateX(5px)}
.answer-btn.selected{border-color:#3b82f6;background:#3b82f6;color:white}
.progress-bar{height:6px;background:#e2e8f0;border-radius:10px;margin-bottom:2rem}
.progress-fill{height:100%;background:linear-gradient(90deg,#3b82f6,#1e40af);transition:width 0.3s;width:0}
.result-section{display:none;text-align:center}
.result-section.show{display:block;animation:fadeIn 0.5s}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.score-badge{display:inline-block;padding:2rem 3rem;border-radius:20px;margin:2rem 0;font-size:3rem;font-weight:900}
.risk-HIGH{background:linear-gradient(135deg,#fee2e2,#fecaca);color:#991b1b;border:3px solid #ef4444}
.risk-MEDIUM{background:linear-gradient(135deg,#fef3c7,#fde68a);color:#92400e;border:3px solid #f59e0b}
.risk-LOW{background:linear-gradient(135deg,#d1fae5,#a7f3d0);color:#065f46;border:3px solid #10b981}
.risk-title{font-size:2rem;font-weight:800;margin:1rem 0}
.risk-desc{font-size:1.1rem;color:#64748b;margin-bottom:2rem;line-height:1.6;max-width:600px;margin-left:auto;margin-right:auto}
.issues-box{background:#f8fafc;border-radius:12px;padding:2rem;margin:2rem 0;text-align:left}
.issue-item{padding:1rem;margin-bottom:0.5rem;background:white;border-radius:8px;border-left:4px solid #ef4444}
.lead-form{background:linear-gradient(135deg,#3b82f6,#1e40af);border-radius:16px;padding:3rem 2rem;margin-top:2rem;color:white}
.lead-form h3{font-size:1.8rem;font-weight:800;margin-bottom:1rem}
.form-grid{display:grid;gap:1rem;margin-top:1.5rem}
.form-group input{width:100%;padding:1rem;border:none;border-radius:8px;font-size:1rem}
.submit-btn{width:100%;padding:1.5rem;background:white;color:#1e40af;border:none;border-radius:8px;font-size:1.2rem;font-weight:700;cursor:pointer;margin-top:1rem}
.submit-btn:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(0,0,0,0.3)}
@media (max-width:640px){
.quiz-card{padding:1.5rem}
.question-text{font-size:1.1rem}
.answer-btn{padding:1rem;font-size:0.95rem}
.score-badge{font-size:2rem;padding:1.5rem 2rem}
}
</style>

<div class="quiz-container">
<div class="quiz-header">
<h1>üîç Quick Compliance Check</h1>
<p>Are you at risk of penalties? Find out in 60 seconds!</p>
<span class="time-badge">‚ö° Only 5 Questions</span>
</div>

<div class="quiz-card">
<div class="progress-bar">
<div class="progress-fill" id="progressBar"></div>
</div>

<div id="quizQuestions">
<div class="question-container active" data-question="1">
<div class="question-number">Question 1 of 5</div>
<div class="question-text">Do you file GST returns on time every month?</div>
<div class="answer-options">
<button class="answer-btn" data-value="1" data-issue="GST filing delays can lead to penalties up to ‚Çπ10,000 per return">
<span style="font-size:1.5rem">‚úó</span> No / Sometimes late
</button>
<button class="answer-btn" data-value="0">
<span style="font-size:1.5rem">‚úì</span> Yes, always on time
</button>
</div>
</div>

<div class="question-container" data-question="2">
<div class="question-number">Question 2 of 5</div>
<div class="question-text">Are all employees properly enrolled in PF/ESI?</div>
<div class="answer-options">
<button class="answer-btn" data-value="1" data-issue="Missing PF/ESI enrollment can result in penalties + back payments">
<span style="font-size:1.5rem">‚úó</span> Some not enrolled / Not sure
</button>
<button class="answer-btn" data-value="0">
<span style="font-size:1.5rem">‚úì</span> Yes, all enrolled properly
</button>
</div>
</div>

<div class="question-container" data-question="3">
<div class="question-number">Question 3 of 5</div>
<div class="question-text">Have you faced any compliance penalties in the last year?</div>
<div class="answer-options">
<button class="answer-btn" data-value="1" data-issue="Previous penalties indicate ongoing compliance issues">
<span style="font-size:1.5rem">‚úó</span> Yes, we have
</button>
<button class="answer-btn" data-value="0">
<span style="font-size:1.5rem">‚úì</span> No penalties
</button>
</div>
</div>

<div class="question-container" data-question="4">
<div class="question-number">Question 4 of 5</div>
<div class="question-text">Do you have proper employment contracts & records?</div>
<div class="answer-options">
<button class="answer-btn" data-value="1" data-issue="Missing documentation can lead to legal disputes & penalties">
<span style="font-size:1.5rem">‚úó</span> Incomplete / No formal contracts
</button>
<button class="answer-btn" data-value="0">
<span style="font-size:1.5rem">‚úì</span> Yes, all documented
</button>
</div>
</div>

<div class="question-container" data-question="5">
<div class="question-number">Question 5 of 5</div>
<div class="question-text">Do you have a dedicated person managing compliance?</div>
<div class="answer-options">
<button class="answer-btn" data-value="1" data-issue="No dedicated resource means higher risk of missing deadlines">
<span style="font-size:1.5rem">‚úó</span> Owner handles it / No one
</button>
<button class="answer-btn" data-value="0">
<span style="font-size:1.5rem">‚úì</span> Yes, dedicated team/person
</button>
</div>
</div>
</div>

<div class="result-section" id="resultSection">
<div id="resultContent"></div>

<div class="lead-form">
<h3>üìß Get Your FREE Action Plan</h3>
<p style="opacity:0.95;margin-bottom:0.5rem">Receive a detailed compliance report + 30-min free consultation</p>
<form id="leadForm">
<div class="form-grid">
<input type="text" placeholder="Your Name *" id="leadName" required>
<input type="email" placeholder="Email Address *" id="leadEmail" required>
<input type="tel" placeholder="Phone Number *" id="leadPhone" required>
<input type="text" placeholder="Company Name *" id="leadCompany" required>
</div>
<button type="submit" class="submit-btn">Get My Free Report & Consultation üöÄ</button>
</form>
<p style="font-size:0.85rem;opacity:0.9;margin-top:1rem">üîí We respect your privacy. No spam, ever.</p>
</div>
</div>
</div>
</div>

<script>
let currentQuestion = 1;
const totalQuestions = 5;
const answers = {};
const issues = [];

const questions = document.querySelectorAll('.question-container');
const progressBar = document.getElementById('progressBar');

document.querySelectorAll('.answer-btn').forEach(btn => {
btn.addEventListener('click', function() {
const question = this.closest('.question-container');
const questionNum = question.dataset.question;
answers[questionNum] = this.dataset.value;
if (this.dataset.issue && this.dataset.value === '1') {
issues.push(this.dataset.issue);
}
if (currentQuestion < totalQuestions) {
questions[currentQuestion - 1].classList.remove('active');
currentQuestion++;
questions[currentQuestion - 1].classList.add('active');
updateProgress();
} else {
showResults();
}
});
});

function updateProgress() {
progressBar.style.width = ((currentQuestion / totalQuestions) * 100) + '%';
}

function showResults() {
progressBar.style.width = '100%';
document.getElementById('quizQuestions').style.display = 'none';
document.getElementById('resultSection').classList.add('show');

const score = Object.values(answers).filter(a => a === '0').length;
let riskLevel, riskClass, riskEmoji, description;

if (score >= 4) {
riskLevel = 'LOW RISK';
riskClass = 'risk-LOW';
riskEmoji = '‚úÖ';
description = 'Good news! Your compliance is mostly in order. We can help you maintain it and close any remaining gaps.';
} else if (score >= 2) {
riskLevel = 'MEDIUM RISK';
riskClass = 'risk-MEDIUM';
riskEmoji = '‚ö†Ô∏è';
description = 'Warning! You have compliance gaps that could lead to penalties. We recommend taking action within 30 days.';
} else {
riskLevel = 'HIGH RISK';
riskClass = 'risk-HIGH';
riskEmoji = 'üö®';
description = 'Critical Alert! Your business is at serious risk of penalties. Immediate action needed to avoid fines up to ‚Çπ5 lakhs+';
}

let resultHTML = '<div class="score-badge ' + riskClass + '">' + riskEmoji + ' ' + riskLevel + '</div>';
resultHTML += '<div class="risk-title">Your Compliance Score: ' + score + '/5</div>';
resultHTML += '<div class="risk-desc">' + description + '</div>';

if (issues.length > 0) {
resultHTML += '<div class="issues-box"><h4 style="margin-bottom:1rem;color:#1e293b;font-weight:700">‚ö†Ô∏è Issues Found:</h4>';
issues.forEach(issue => {
resultHTML += '<div class="issue-item">' + issue + '</div>';
});
resultHTML += '</div>';
}

document.getElementById('resultContent').innerHTML = resultHTML;
}

document.getElementById('leadForm').addEventListener('submit', function(e) {
e.preventDefault();
const score = Object.values(answers).filter(a => a === '0').length;
const leadData = {
name: document.getElementById('leadName').value,
email: document.getElementById('leadEmail').value,
phone: document.getElementById('leadPhone').value,
company: document.getElementById('leadCompany').value,
score: score,
totalScore: totalQuestions,
issues: issues,
timestamp: new Date()
};

console.log('üéØ LEAD CAPTURED:', leadData);

this.innerHTML = '<div style="padding:2rem;font-size:1.2rem">‚úÖ Success! Check your email for your detailed report.<br><br>Our team will call you within 24 hours!</div>';
});
</script>
</Base>
