---
import BaseHead from "../components/BaseHead.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import AnimShell from "../components/AnimShell.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
const { title = SITE_TITLE, description = SITE_DESCRIPTION } = Astro.props;
---
<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <BaseHead title={title} description={description} ogImage="/og-default.svg" />
    <link rel="stylesheet" href="/global.css?v=4" />
  </head>
  <body>
    <AnimShell />
    <Header />
    <main class="container">
      <slot />
    </main>
    <Footer />

    <script>
      import { initSmoothScroll, revealOnScroll, pinSection, staggerChildren, countUp, marqueeOnce, parallax, heroIntro, magneticButtons, autoSlider } from "../lib/animations.js";
      initSmoothScroll(); revealOnScroll(".reveal"); pinSection(".process");
      staggerChildren(".stagger"); countUp(".counter"); marqueeOnce("[data-marquee]");
      parallax(".parallax"); heroIntro(); magneticButtons(".btn"); autoSlider(".t-slider");

      if (document.startViewTransition) {
        document.addEventListener("click", (e) => {
          const a = e.target.closest("a");
          if (!a || a.target || a.hasAttribute("download") || (a.getAttribute("href")||"").startsWith("#")) return;
          e.preventDefault(); document.startViewTransition(() => { window.location = a.href; });
        });
      }
      {
        const header=document.querySelector("header,.site-header");
        const hero=document.querySelector(".hero") || document.body.firstElementChild;
        if(header && hero){
          const io=new IntersectionObserver(([e])=>header.classList.toggle("is-scrolled", !e.isIntersecting));
          io.observe(hero);
        }
      }
    </script>
  </body>
</html>
